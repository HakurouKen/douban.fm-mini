!function(a,b,c){var d=function(a,b,d){var e,f=function(b){c.ajax({url:"http://sug.music.baidu.com/info/suggestion?format=json&version=2&from=0&word="+a.title+"-"+a.artist,success:function(a){b&&b(a)},error:function(a){d(a)}})},g=function(a,b){var e=(a.data.song[0]||{}).songid;return e?c.ajax({url:"http://play.baidu.com/data/music/songlink",method:"post",data:{songIds:e},success:function(a){b&&b(a)},error:function(a){d(a)}}):void d()},h=function(a,b){var f=a.data.songList[0].lrcLink;f?(e="http://play.baidu.com"+f,c.ajax({url:e,success:function(a){b&&b(a)},error:function(a){d(a)}})):d()},i=function(a){for(var b,c,d=a.split("\n"),e=0,f=d.length,g=/^\[\d+:\d+(.\d+)\]/,h=/\[\d+:\d+(.\d+)\]/g,i=[],j=[];f>e;e++)g.test(d[e])&&(i=d[e].match(h),i.forEach(function(a){b={},b.lrc=d[e].replace(i.join(""),""),c=0,a.replace(/[\[\]]/g,"").split(":").forEach(function(a){c=60*c+parseFloat(a,10)}),c=1e3*c,b.time=Math.round(c),j.push(b)}));return j.sort(function(a,b){return a.time-b.time}),j};f(function(a){g(a,function(a){h(a,function(a){b&&b(i(a),e)})})})},e=function(a){var b,c,e=[],f=[],g=0,h=!1,i="",j=0,k=0,l=function(b,c){return e=b||[],g=0,f=e.map(function(a){return a.time}),f.push(a.getLength()),f.unshift(0),i=c||"",this},m=function(){},n=function(){},o=function(a,b,c){for(var d=f.length,b=b||0,c=c||d-1,g=Math.floor((b+c)/2);c-b>0;)a>=f[g]?(b=g+1,g=Math.floor((b+c)/2)):(c=g,g=Math.floor((b+c)/2));return{startTime:function(){return f[b-1]},endTime:function(){return f[b]},lrc:function(){return e[b-2]||""},index:function(){return b-2}}},p={init:function(a){return a&&(m=a),m(e,i),this},update:function(a){return a&&(n=a),n(j,k),this},getLrc:function(){return e},curLrc:function(){return o(j)},fix:function(a){g+=1e3*a},freeze:function(){h=!0},unfreeze:function(){h=!1}};return a.bind("loadedmetadata",function(){b=a.getSongInfo(),c=a.getLength(),p.freeze(),d(b,function(a,b){l(a,b),p.unfreeze(),m(a,b)},function(){l(),m()})}),a.bind("timeupdate",function(){j=parseInt(1e3*a.getCurTime()+g),k=j/(1e3*c),n(j,k)}),p};a.Lyric=e}(window,document,Util);